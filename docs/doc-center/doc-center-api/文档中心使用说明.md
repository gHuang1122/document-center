

# 说明

文档中心采用 `系统`-`服务` -`文档` 的三级结构进行文档管理。

## 系统

`系统` 指可以独立运行地一套系统或者平台，如`文档中心` 、`视频分析平台`、`数据中台` 等，`系统` 需设置一个**全局唯一**的系统标识(System Name)， 建议使用kebabcase的英文词组进行命名，如`doc-center`

## 服务

`服务` 必须属于某个系统，它可以是真实存在的服务，如`视频分析平台poseidon服务`，也可以是逻辑上的，用于管理某一类文档的，如`数据中台公共文档`。`服务`需要设置一个**全局唯一**的服务标识(Service Name)， 建议使用kebabcase的英文词组进行命名，特别地，对于真实存在的服务，建议以系统名称开头，以免与其他系统相似类型的服务混淆，如`doc-center-api`


## 文档

`文档` 必须属于某个服务，文档分为两种类型 `Markdown文档` 和 `Swagger接口文档`

### Markdown文档

用于展示文字内容的说明文档，使用Markdown格式编写，目前文档中心使用`GitHub Flavored Markdown(gfm)` 作为格式标准，额外添加了对表格等功能的支持，具体格式说明参考[这里](https://github.github.com/gfm/)

### Swagger接口文档

用于展示Http接口内容的说明文档，文档中心会解析接口服务提供的Swagger JSON, 并转换为对人阅读友好的接口文档，支持`OAS 2.0` 和`OAS 3.0` 两个版本

 


# 基本操作


## 系统管理

欢迎页面点击右上角的齿轮标识， 点击 `系统管理` ，在管理页面中进行系统的新建、编辑和删除。

## 服务管理

欢迎页面点击右上角的齿轮标识， 点击 `服务管理` ，在管理页面中进行服务的新建、编辑和删除。

## 文档管理

### Markdown文档管理

Markdown文档目前通过[内网gitlab仓库](http://gitlab.software.dc/mp-docs/docs)进行管理，文档编辑人员请fork本仓库，在个人仓库里对文档进行新建、编辑或者删除等操作后，提交Merge Request至仓库的`master`分支，进行审核，在审核通过后系统会通过WebHooks自动更新至文档中心中。

* 具体操作流程可以参考[这里](https://docs.gitlab.com/ee/user/project/repository/forking_workflow.html)

* **仓库内文件命名规范**

  对于所属于系统A，服务B的文档，假设其系统标识为`system-a`，其服务标识为`system-a-service-b`, 其文档标题为`测试` ，那么该文档应该放置于`/system-a/system-a-service-b/`目录下，命名为`测试.md`

* 如果文档需要嵌入图片，除支持引用公网图片之外，也可将图片提交至与文档同级的img目录下，并以相对路径进行引用展示, 示例如下：

  ```markdown
    ![凌久logo](./img/文档中心使用说明/1.png)
  ```

  

  ![凌久logo](./img/文档中心使用说明/1.png)

* 如果需要链接至其他文档，直接按md文件位置使用**相对路径**进行引用，注意空格等**特殊字符**需要进行URL编码，示例如下

```markdown
[前端README示例](../../specification/frontend-doc/README%20示例.md)
```

[前端README示例](../../specification/frontend-doc/README%20示例.md)

### Swagger接口文档管理

欢迎页面点击右上角的齿轮标识， 点击 `文档管理` ，在管理页面中进行swagger接口文档的新建、编辑和删除。

其中SwaggerJSON请求地址，支持如下两种类型URL

1. 相对URL

   对于已在nacos完成注册的服务，后台会根据文档所属的服务名获得服务的地址和端口，此时只需填写JSON请求地址的相对路径URL即可，如`/v3/api-docs`

2. 绝对URL

   对于未在nacos完成注册的服务，需要添加JSON请求地址的绝对路径，如`http://172.18.8.157:17101/v3/api-docs`

## 标签管理

欢迎页面点击右上角的齿轮标识， 点击 `标签管理` ，在管理页面中进行标签的新建、编辑和删除。
便签编辑完成后，在文档编辑页面可以添加或移除标签。

## 搜索

在欢迎页面可以进行文档的搜索，支持按系统名称、系统标识、服务名称、服务标识、文档标题、标签等多个维度的文档搜索。